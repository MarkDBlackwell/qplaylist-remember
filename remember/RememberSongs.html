<!DOCTYPE HTML>
<!-- Copyright (C) 2017 Mark D. Blackwell.
   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
   -->
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Remember songs</title>
<link rel="stylesheet" type="text/css" href="RememberSongs.css">
<link rel="stylesheet" type="text/css" href="RememberSongs-responsive-smartphone.css">
<!--Keep as first script in <head>:-->
<script type="text/javascript" src="RememberSongs-windows-phone-8-viewport-fix.js"></script>
</head>
<body id="main">
<script type="text/javascript" src="RememberSongs.js"></script>
</body>
<script>
//See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions
//Hide everything from the global namespace, by using an IIFE (Immediately
//    Invokable Function Expression).
(function(){
    var keyStorage = 'RememberSongs';

    var tempSongs = [
        {
          artist: "Vance Joy",
          likedOrCommented: true,
          title: "Lay It On Me",
          time: "7:26 AM",
          timestamp: "2017 08 31 07 26"
        },
        {
          artist: "The Family Crest",
          likedOrCommented: false,
          title: "Mirror Love",
          time: "7:22 AM",
          timestamp: "2017 08 31 07 22"
        },
      ];
    var tempSongsAsString = JSON.stringify(tempSongs);

    //Save data to sessionStorage.
    //TODO: remove this.
    window.sessionStorage.setItem(keyStorage, tempSongsAsString);
    
    var retrieveSongsFromStorage = function(){
        try {
            return window.sessionStorage.getItem(keyStorage);
        } catch (exception) {
            return "[]";
        }
    };
    //Retrieve data from sessionStorage.
    //TODO: If localStorage becomes too small, then use IndexedDB, instead.
    //See: https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API
    var songsAsString = retrieveSongsFromStorage();
//window.alert(songsAsString);

    var songs = JSON.parse(songsAsString);
    
    var node = document.getElementById('main');
    var app = Elm.Main.embed(node, {
      showCommentButtons: true,
      songsRemembered: songs
    });
    //Note: if your Elm module is named "MyThing.Root" you
    //would call "Elm.MyThing.Root.embed(node)" instead.
})();
</script>
</html>
